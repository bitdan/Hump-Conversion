<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能格式转换工具</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
        }
        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        input {
            flex: 1;
            padding: 8px;
            font-size: 16px;
        }
        .results {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .result-item {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .result-item:hover {
            background-color: #f5f5f5;
        }
        .result-item.copied {
            background-color: #e8f5e9;
            border-color: #81c784;
        }
        .result-item.copied::after {
            content: '已复制';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #4caf50;
            font-size: 0.9em;
        }
        .type-label {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 4px;
        }
    </style>
</head>
<body>
<h1>智能格式转换工具</h1>
<div class="container">
    <div class="input-group">
        <input type="text" id="input" placeholder="输入文本，自动识别格式并转换" oninput="autoConvert()">
        <span id="currentType" style="min-width: 100px;"></span>
    </div>
    <div class="results" id="results"></div>
</div>

<script>
    // 检测输入文本的类型
    function detectType(str) {
        if (!str) return 'empty';

        // 驼峰格式检测（包含大写字母但不包含下划线和中划线）
        if (/[A-Z]/.test(str) && !/[_-]/.test(str)) {
            return 'camel';
        }
        // 下划线格式检测
        if (str.includes('_')) {
            return 'underscore';
        }
        // 中划线格式检测
        if (str.includes('-')) {
            return 'kebab';
        }
        // 纯小写格式
        return 'lower';
    }

    // 驼峰转下划线（改进版）
    function camelToUnderscore(str) {
        return str
            // 处理连续大写字母的情况
            .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')
            // 处理普通的驼峰情况
            .replace(/([a-z\d])([A-Z])/g, '$1_$2')
            .toLowerCase();
    }

    // 驼峰转中划线（改进版）
    function camelToKebab(str) {
        return str
            // 处理连续大写字母的情况
            .replace(/([A-Z]+)([A-Z][a-z])/g, '$1-$2')
            // 处理普通的驼峰情况
            .replace(/([a-z\d])([A-Z])/g, '$1-$2')
            .toLowerCase();
    }

    // 下划线转驼峰
    function underscoreToCamel(str) {
        return str.toLowerCase()
            .replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());
    }

    // 中划线转驼峰
    function kebabToCamel(str) {
        return str.toLowerCase()
            .replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());
    }

    // 其他转换函数
    const converters = {
        camelToUnderscore,
        camelToKebab,
        underscoreToCamel,
        kebabToCamel,
        underscoreToKebab: str => str.replace(/_/g, '-'),
        kebabToUnderscore: str => str.replace(/-/g, '_'),
    };

    // 获取类型的中文说明
    function getTypeLabel(type) {
        const labels = {
            camel: '驼峰格式',
            underscore: '下划线格式',
            kebab: '中划线格式',
            lower: '纯小写格式',
            empty: '空'
        };
        return labels[type] || '未知格式';
    }

    // 复制文本到剪贴板
    async function copyToClipboard(text, element) {
        try {
            await navigator.clipboard.writeText(text);
            element.classList.add('copied');
            setTimeout(() => {
                element.classList.remove('copied');
            }, 2000);
        } catch (err) {
            console.error('复制失败:', err);
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
    }

    // 自动转换函数
    function autoConvert() {
        const input = document.getElementById('input');
        const text = input.value;
        const type = detectType(text);
        const currentType = document.getElementById('currentType');
        const results = document.getElementById('results');

        currentType.textContent = `当前格式：${getTypeLabel(type)}`;
        results.innerHTML = '';

        if (text && type !== 'empty') {
            let convertedResults = [];

            switch(type) {
                case 'camel':
                    convertedResults = [
                        { label: '下划线格式', value: converters.camelToUnderscore(text) },
                        { label: '中划线格式', value: converters.camelToKebab(text) }
                    ];
                    break;
                case 'underscore':
                    convertedResults = [
                        { label: '驼峰格式', value: converters.underscoreToCamel(text) },
                        { label: '中划线格式', value: converters.underscoreToKebab(text) }
                    ];
                    break;
                case 'kebab':
                    convertedResults = [
                        { label: '驼峰格式', value: converters.kebabToCamel(text) },
                        { label: '下划线格式', value: converters.kebabToUnderscore(text) }
                    ];
                    break;
                case 'lower':
                    convertedResults = [
                        { label: '下划线格式', value: text },
                        { label: '中划线格式', value: text }
                    ];
                    break;
            }

            convertedResults.forEach(result => {
                const div = document.createElement('div');
                div.className = 'result-item';
                div.innerHTML = `
                        <div class="type-label">${result.label}</div>
                        <div>${result.value}</div>
                    `;
                div.onclick = () => copyToClipboard(result.value, div);
                results.appendChild(div);
            });
        }
    }
</script>
</body>
</html>
